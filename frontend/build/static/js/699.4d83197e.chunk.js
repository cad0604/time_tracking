"use strict";(self.webpackChunkreact_digitalbrann_no=self.webpackChunkreact_digitalbrann_no||[]).push([[699],{4054:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(2641),r=(n(2791),n(184));function s(e){let{label:t,size:n="large",...s}=e;return(0,r.jsx)(a.ZP,{className:"brann-secondary-button",size:n,type:"default",...s,children:t})}},4212:(e,t,n)=>{n.d(t,{Z:()=>i});n(2791);var a=n(3655),r=n(184);const{Text:s}=a.default;function i(e){let{text:t,align:n,color:a,fontSize:i=16,marginTop:l=0,...d}=e;return(0,r.jsx)(s,{ellipsis:!0,...d,style:{marginTop:l,textAlign:n,color:a,fontSize:i},children:t})}},146:(e,t,n)=>{n.d(t,{Z:()=>m});n(2791);var a=n(9434),r=n(3990),s=n(184);const i=e=>{let{children:t,...n}=e;return(0,s.jsx)("div",{...n,children:t})};var l=n(7689),d=n(1773),c=n(6800);const o=n.p+"static/media/LogoGMR.d5171a7665c86de1000a.png";function u(e){let{size:t=46,justify:n="center"}=e;const a={align:"center",block:"true",style:{justifyContent:n,width:"100%",padding:"0 24px"}},r={height:t,alt:"Digitalbrann",preview:!1};return(0,s.jsx)(d.Z,{...a,children:(0,s.jsx)(c.Z,{src:o,...r})})}var x=n(2641);function g(e){let{label:t,size:n="large",...a}=e;return(0,s.jsx)(x.ZP,{className:"brann-active-button",size:n,type:"primary",...a,children:t})}const{Header:f,Content:h}=r.default,m=e=>{let{children:t}=e;const n=(0,a.I0)(),d=(0,l.s0)();return(0,s.jsx)(r.default,{className:"app-layout",children:(0,s.jsxs)(r.default,{children:[(0,s.jsxs)(f,{style:{background:"linear-gradient(to right, white 15%, green)"},children:[(0,s.jsx)(i,{className:"nav_left",children:(0,s.jsx)(u,{})}),(0,s.jsx)(i,{className:"nav",children:(0,s.jsx)(g,{label:"Finalizar la sesi\xf3n",onClick:()=>{var e;"/loggut"===(e="/loggut")?n({type:"LOGOUT"}):d(e)}})})]}),(0,s.jsx)(h,{children:t})]})})}},5263:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(2791),r=n(6106),s=n(914),i=n(146),l=n(2648),d=n(9613),c=n(891),o=n(184);function u(e){let{options:t,onChange:n,...a}=e;return(0,o.jsx)(c.Z,{size:"large",onChange:n,options:t,style:{width:250},...a})}var x=n(9434),g=n(6965),f=n(7954),h=n(1136),m=n(7892),j=n.n(m),p=n(9367),Z=n(4212);const y=e=>{let{firstName:t,lastName:n}=e;return(0,o.jsxs)(r.Z,{align:"top",gutter:12,children:[(0,o.jsx)(s.Z,{children:(0,o.jsx)(p.C,{size:"small",children:"".concat(t.charAt(0)).concat(n.charAt(0))})}),(0,o.jsx)(s.Z,{children:(0,o.jsx)(Z.Z,{text:"".concat(t," ").concat(n)})})]})};var v=n(3283),Y=n(4054);const{RangePicker:k}=l.default,D=()=>{const e=(0,x.I0)(),{timeTracking:t,isFetchingtimeTracking:n,isMakeXLS:i}=(0,x.v9)((e=>e.workflowTimeTracking)),{customers:l}=(0,x.v9)((e=>e.crmCustomer)),[c,m]=(0,a.useState)(null),[p,Z]=(0,a.useState)(null),[D,T]=(0,a.useState)(0),[b,L]=(0,a.useState)([]),C=e=>String("0"+e).slice(-2),M=[{title:"Comenzar",dataIndex:"startTime",key:"startTime",render:e=>j()(e).format("YYYY-MM-DD HH:mm:ss")},{title:"Latitud",dataIndex:"startLatitude",key:"startLatitude",responsive:["md"]},{title:"Longitud",dataIndex:"startLongitude",key:"startLongitude",responsive:["md"]},{title:"Fin",dataIndex:"endTime",key:"endTime",render:e=>j()(e).format("YYYY-MM-DD HH:mm:ss")},{title:"Latitud",dataIndex:"endLatitude",key:"endLatitude",responsive:["md"]},{title:"Longitud",dataIndex:"endLongitude",key:"endLongitude",responsive:["md"]},{title:"Tiempo de seguimiento",key:"time",align:"right",render:(e,t)=>{const n=j()(t.endTime).diff(j()(t.startTime))/1e3;let a=n%60,r=0,s=0;n>a&&(r=(n-a)/60,s=r%60);let i=0,l=0;return r>s&&(i=(r-s)/60,l=i%60),C(l)+":"+C(s)+":"+C(a)}}];(0,a.useEffect)((()=>{const t=new Date,n=j()(t).add(1,"day").format("YYYY-MM-DD"),a=j()(t).format("YYYY-MM-DD");m(a),Z(n),e({type:f.Z.FETCH_CUSTOMER})}),[e]),(0,a.useEffect)((()=>{c&&p&&0!==D&&e({type:g.Z.FETCH_TIME_TRACKING,startDate:c,endDate:p,userId:D})}),[e,c,p,D]),(0,a.useEffect)((()=>{(0,v.Z)(l)||(async()=>{let e=[];await l.map((t=>e=[...e,{value:t.id,label:(0,o.jsx)(y,{firstName:t.firstName,lastName:t.lastName})}])),console.log("value",e),L(e)})()}),[l]),(0,a.useEffect)((()=>{!0===i&&(e({type:g.Z.RESET_XLS}),e({type:h.Z.FILE_DOWNLOAD,payload:"./report/file.xlsx",fileName:"report.xlsx"}))}),[i,e]);return(0,o.jsx)(a.Fragment,{children:(0,o.jsxs)(r.Z,{gutter:[0,32],children:[(0,o.jsx)(s.Z,{span:24,children:(0,o.jsxs)(r.Z,{justify:"space-between",gutter:[32,16],children:[(0,o.jsx)(s.Z,{children:(0,o.jsxs)(r.Z,{justify:"start",gutter:[32,16],children:[(0,o.jsx)(s.Z,{children:(0,o.jsx)(u,{placeholder:"Seleccionar trabajadora",options:b,onChange:e=>{T(e)}})}),(0,o.jsx)(s.Z,{children:(0,o.jsx)(k,{size:"large",onChange:e=>(e=>{const t=j()(e[0]).format("YYYY-MM-DD"),n=j()(e[1]).format("YYYY-MM-DD");m(t),Z(n)})(e)})})]})}),(0,o.jsx)(s.Z,{children:(0,o.jsx)(Y.Z,{label:"Descargar archivo XLS",onClick:()=>{e({type:g.Z.MAKE_XLS,startDate:c,endDate:p,userId:D})},disabled:null===c||null===p||0===D})})]})}),(0,o.jsx)(s.Z,{span:24,children:(0,o.jsx)(d.Z,{rowKey:"id",loading:n,columns:M,dataSource:t})})]})})};function T(){return(0,o.jsx)(i.Z,{children:(0,o.jsx)(r.Z,{gutter:[0,32],children:(0,o.jsx)(s.Z,{span:24,children:(0,o.jsx)(D,{})})})})}},3283:(e,t,n)=>{function a(e){if(null==e)return!0;if("object"!==typeof e)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}n.d(t,{Z:()=>a})}}]);
//# sourceMappingURL=699.4d83197e.chunk.js.map